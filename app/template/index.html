<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />
  <meta name="description" content="SVS - Sistema de Vendas Skymsen" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SVS - Sistema de Vendas Skymsen</title>

  <!-- PRELOAD APENAS recursos cr√≠ticos -->
  <link rel="preload" href="/static/css/base.css" as="style">
  <link rel="preload" href="/static/css/navbar.css" as="style">
  <link rel="preload" href="/static/js/core/app.js" as="script">

  <!-- FAVICONS OTIMIZADOS -->
  <link rel="icon" type="image/x-icon" href="/static/images/favicon-16x16.ico" sizes="16x16">
  <link rel="icon" type="image/png" sizes="32x32" href="/static/images/favicon-32x32.png">
  
  <!-- CSS CR√çTICO primeiro -->
  <link rel="stylesheet" href="/static/css/base.css" />
  <link rel="stylesheet" href="/static/css/navbar.css" />
  
  <!-- CSS N√ÉO CR√çTICO - carregamento ass√≠ncrono -->
  <link rel="preload" href="/static/css/modules.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
  <link rel="preload" href="/static/vendor/bootstrap/css/bootstrap.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
  
  <!-- Fallback para CSS n√£o cr√≠tico -->
  <noscript>
    <link rel="stylesheet" href="/static/css/modules.css" />
    <link rel="stylesheet" href="/static/vendor/bootstrap/css/bootstrap.min.css" />
    <link rel="stylesheet" href="/static/vendor/fontawesome_700/css/all.min.css" />
  </noscript>

</head>

<body class="svs-app">
  
  <!-- CONTAINER DA NAVBAR -->
  <div id="navbar-container" role="navigation" aria-label="Navega√ß√£o principal"></div>
  
  <!-- CONTAINER PRINCIPAL -->
  <div class="app-container">
    
    <!-- √ÅREA DE CONTE√öDO -->
    <main class="main-content" id="main-content" role="main">
      
      <!-- ESTADO DE CARREGAMENTO -->
      <div class="estado-carregamento oculto" id="loading-state">
        <div class="spinner-carregamento"></div>
        <p>Carregando...</p>
      </div>
      
      <!-- CONTAINER DE M√ìDULOS -->
      <div class="module-container" id="module-container">
        
        <!-- TELA DE BOAS-VINDAS SIMPLES -->
        <div class="tela-boas-vindas">
          <div class="conteudo-boas-vindas aparecer">
            
            <div class="logo-sistema">
              <i class="fas fa-building"></i>
            </div>
            
            <h1 class="titulo-sistema">
              Sistema de Vendas <span class="destaque">Skymsen</span>
            </h1>
            
            <p class="descricao-sistema">
              Bem-vindo ao SVS. Utilize o menu superior para acessar as funcionalidades do sistema.
            </p>
            
            <div class="instrucao-uso">
              <i class="fas fa-info-circle"></i>
              Para come√ßar, clique no menu no topo da p√°gina
            </div>
            
          </div>
        </div>
        
      </div>
      
    </main>
    
    <!-- RODAP√â -->
    <footer class="rodape-app" id="app-footer">
      <div class="conteudo-rodape">
        <span class="texto-rodape">
          SVS - Sistema de Vendas Skymsen &copy; 2024
        </span>
        <span class="status-sistema">
          Sistema Ativo
        </span>
      </div>
    </footer>
    
  </div>

  <!-- CONFIGURA√á√ÉO GLOBAL inline para evitar round-trip -->
  <script>
    window.SVS_CONFIG = {
      apiBase: '/api',
      staticBase: '/static',
      version: '2.0.0',
      debug: true,
      usuario: {
        nome: 'willian.cavalcante',
        permissoes: ['leitura', 'escrita', 'admin']
      }
    };
  </script>

  <!-- SCRIPT CR√çTICO - apenas app.js inicialmente -->
  <script src="/static/js/core/app.js"></script>
  
  <!-- INICIALIZA√á√ÉO OTIMIZADA -->
  <script>
    // Fun√ß√£o para carregar navbar de forma ass√≠ncrona
    function loadNavbarScript() {
      return new Promise((resolve, reject) => {
        if (window.SVSNavbar) {
          resolve();
          return;
        }
        
        const script = document.createElement('script');
        script.src = '/static/js/components/navbar.js';
        script.async = true;
        script.onload = resolve;
        script.onerror = reject;
        document.head.appendChild(script);
      });
    }
    
    // Fun√ß√£o para carregar FontAwesome quando necess√°rio
    function loadFontAwesome() {
      // Carregar FontAwesome m√≠nimo quando h√° √≠cones na p√°gina
      if (document.querySelector('.fas, .far, .fab')) {
        const link = document.createElement('link');
        link.rel = 'stylesheet';
        link.href = '/static/css/fontawesome-minimal.css';
        document.head.appendChild(link);
        console.log('üì¶ FontAwesome m√≠nimo carregado');
      }
    }
    
    // Inicializa√ß√£o com prioridades
    document.addEventListener('DOMContentLoaded', async function() {
      console.log('üéØ Iniciando SVS...');
      
      try {
        // 1. Inicializar app primeiro (sem navbar)
        await window.SVSApp.init();
        
        // 2. Carregar navbar de forma ass√≠ncrona (n√£o bloqueia)
        loadNavbarScript().then(() => {
          console.log('üì± Navbar script carregado');
        }).catch(err => {
          console.warn('‚ö†Ô∏è Erro ao carregar navbar script:', err);
        });
        
        // 3. Carregar outros scripts n√£o cr√≠ticos
        setTimeout(() => {
          const scripts = [
            '/static/vendor/bootstrap/js/bootstrap.bundle.min.js',
            '/static/js/core/module-loader.js', 
            '/static/js/core/spa-router.js'
          ];
          
          scripts.forEach((src, index) => {
            setTimeout(() => {
              const script = document.createElement('script');
              script.src = src;
              script.async = true;
              document.head.appendChild(script);
            }, index * 200);
          });
        }, 500);
        
        // 4. Carregar FontAwesome quando necess√°rio
        setTimeout(loadFontAwesome, 1000);
        
      } catch (error) {
        console.error('‚ùå Erro na inicializa√ß√£o:', error);
      }
    });
  </script>

</body>

</html>